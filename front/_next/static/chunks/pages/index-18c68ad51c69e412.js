(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6453)}])},6453:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r=t(5893),u=t(4560),a=t(7294),c=t(4051),i=t.n(c);function s(e,n,t,r,u,a,c){try{var i=e[a](c),s=i.value}catch(l){return void t(l)}i.done?n(s):Promise.resolve(s).then(r,u)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,u){var a=e.apply(n,t);function c(e){s(a,r,u,c,i,"next",e)}function i(e){s(a,r,u,c,i,"throw",e)}c(void 0)}))}}var o={"Content-type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},f=function(){var e=l(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:o,method:"GET"},e.next=4,fetch(n,t).catch((function(e){return null}));case 4:if(null!==(r=e.sent)&&200===r.status){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,r.json();case 11:return e.abrupt("return",e.sent);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",{responseBody:null,responseStatus:418});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=l(i().mark((function e(n,t){var r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:o,method:"POST",body:JSON.stringify(t)},e.next=4,fetch(n,r).catch((function(e){return null}));case 4:if(null===(u=e.sent)||200!==u.status&&201!==u.status){e.next=11;break}return e.next=8,u.json();case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",{responseBody:null,responseStatus:418});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n,t){return e.apply(this,arguments)}}(),d=function(){var e=l(i().mark((function e(n,t){var r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:o,method:"DELETE",body:JSON.stringify(t)},e.next=4,fetch(n,r).catch((function(e){return null}));case 4:if(null===(u=e.sent)||200!==u.status&&201!==u.status){e.next=11;break}return e.next=8,u.json();case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",{responseBody:null,responseStatus:418});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n,t){return e.apply(this,arguments)}}(),p={get:f,post:h,delete:d};!function(){var e=l(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==n.status){e.next=4;break}return e.abrupt("return",unauthorizedUser);case 4:return e.next=6,n.json();case 6:return t=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))}();function x(e,n,t,r,u,a,c){try{var i=e[a](c),s=i.value}catch(l){return void t(l)}i.done?n(s):Promise.resolve(s).then(r,u)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,u){var a=e.apply(n,t);function c(e){x(a,r,u,c,i,"next",e)}function i(e){x(a,r,u,c,i,"throw",e)}c(void 0)}))}}var j=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/image/paths"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/image"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=v(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("".concat("http://localhost:8080","/name/randomize"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/image/move"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/image/update"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/image/tag"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.delete("".concat("http://localhost:8080","/image/tag"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=v(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("".concat("http://localhost:8080","/name/count"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=v(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("".concat("http://localhost:8080","/image/index"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=v(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("".concat("http://localhost:8080","/image/location"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.post("".concat("http://localhost:8080","/folder"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=v(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.delete("".concat("http://localhost:8080","/folder"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I={getPaths:j,getImage:m,refresh:g,moveImage:Z,updateImage:y,addTag:w,deleteTag:b,getNumberOfImagesToMove:P,index:k,getLocations:S,addFolder:C,deleteFolder:N},T=t(7720),E=t(8462),A=(t(1163),function(e){var n=e.children;return(0,r.jsxs)(u.Jn,{variant:"permanent",anchor:"left",PaperProps:{component:u.Mt},children:[(0,r.jsx)(T.Z,{}),(0,r.jsx)(E.Z,{children:n}),(0,r.jsx)(T.Z,{})]})}),D=t(8262),O=t(6886),W=t(7212),_=t(7918),L=t(8619),F=t(5861),z=t(9334),B=t(3454),J=t(6420),M=t(2474),V=t(431),X=t(138),U=t(7058),R=t(5071),H=t(5450),$=t(9007),q=t(9225),G=function(e){var n=e.children;return(0,r.jsx)(u.D,{children:(0,r.jsx)(u.mB,{children:n})})},Y=t(5675),K=t.n(Y),Q=t(8216),ee=function(e,n){e.preventDefault(),n(e.target.value)},ne=function(e){return(0,Q.Z)(e)},te=t(1733),re=t(449),ue=t(5512);function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ce(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie=[{value:"SOURCE",label:"Source"},{value:"INDEX",label:"Index"}],se=function(){var e=(0,a.useState)(!0),n=e[0],t=e[1],c=(0,a.useState)([]),i=c[0],s=c[1],l=(0,a.useState)([]),o=l[0],f=l[1],h=(0,a.useState)(""),d=h[0],p=h[1],x=(0,a.useState)([]),v=x[0],j=x[1],m=(0,a.useState)([]),g=m[0],Z=m[1],y=(0,a.useState)([]),w=y[0],b=y[1],P=(0,a.useState)(""),k=P[0],S=P[1],C=(0,a.useState)("filter"),N=C[0],E=C[1],Y=(0,a.useState)("select"),Q=Y[0],ae=Y[1],se=(0,a.useState)(50),le=se[0],oe=se[1],fe=(0,a.useState)(0),he=fe[0],de=fe[1],pe=(0,a.useState)([]),xe=pe[0],ve=pe[1],je=(0,a.useState)(null),me=je[0],ge=je[1],Ze=(0,a.useState)(!1),ye=Ze[0],we=Ze[1],be=(0,a.useState)(""),Pe=be[0],ke=be[1],Se=(0,a.useState)(""),Ce=Se[0],Ne=Se[1],Ie=(0,a.useState)(""),Te=Ie[0],Ee=Ie[1],Ae=function(e,n){e.length>0?f(n.filter((function(n){return e.every((function(e){return n.tags.includes(e)}))}))):f(i)},De=function(){I.getPaths({value:d}).then((function(e){return 0===e.images.length&&setTimeout((function(){return t(!0)}),1e3),t(!1),s(e.images),Z(e.tags),e})).then((function(e){w.length>0?Ae(w,e.images):f(e.images),ge(i.find((function(e){return e.fileName===me.fileName})));var n=void 0!==me&&null!==me?i.find((function(e){return e.fileName===me.fileName})):null;ge(null!==n?n:null)})),I.getNumberOfImagesToMove().then((function(e){return de(e.count)})),0===v.length&&I.getLocations().then((function(e){j(e)}))},Oe=function(){if("undefined"!==typeof document){var e=document.getElementById("imageList");window.innerHeight+window.scrollY>.7*e.offsetHeight&&le<=i.length&&oe(le+50)}},We=function(e,n){var t=e.target.value;I.updateImage({tags:t,folder:n.folder,fileName:n.fileName,width:n.width,height:n.height}).then((function(e){De()}))};return(0,a.useEffect)((function(){return(n||0===w.length&&o.length!==i.length)&&De(),window.addEventListener("scroll",Oe),function(){window.removeEventListener("scroll",Oe)}}),[le,i,o]),(0,r.jsxs)(a.Fragment,{children:[ye&&(0,r.jsx)(D.Z,{fullWidth:!0,maxWidth:"xl",open:ye,onClose:function(){we(!ye)},children:(0,r.jsx)(u.Lq,{children:(0,r.jsxs)(O.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(u.zJ,{item:!0,xs:6,children:(0,r.jsx)(K(),{id:me.fileName,src:"".concat("http://localhost:8080","/image?url=").concat(me.folder.replaceAll("\\","/"),"/").concat(me.fileName),alt:"",layout:"intrinsic",width:me.width,height:me.height,loading:"lazy"})}),(0,r.jsx)(u.Df,{item:!0,xs:6,children:(0,r.jsx)(O.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:me&&me.tags.sort().map((function(e,n){return(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(W.ZP,{children:(0,r.jsx)(_.Z,{label:e,onDelete:function(n){return We({target:{value:me.tags.filter((function(n){return n!==e}))}},me)}})})},n)}))})})]})})}),(0,r.jsxs)(A,{children:[(0,r.jsx)(W.ZP,{children:(0,r.jsx)(L.Z,{onClick:function(e){return function(e){e.preventDefault(),I.refresh().then((function(e){return De()}))}(e)},children:(0,r.jsxs)(O.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(u.kc,{children:"Refresh\u3164"})}),he>0?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(O.ZP,{item:!0,children:"("}),(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(u.$o,{children:he})}),(0,r.jsx)(O.ZP,{item:!0,children:")"})]}):(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(F.Z,{children:"(none)"})})]})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(z.Z,{children:(0,r.jsxs)(F.Z,{children:["Image count: ",o.length+"/"+i.length]})})}),(0,r.jsx)(T.Z,{}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(z.Z,{children:(0,r.jsx)(F.Z,{children:"Location"})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsxs)(B.Z,{color:"primary",value:Q,exclusive:!0,onChange:function(e){return ee(e,ae)},fullWidth:!0,children:[(0,r.jsx)(J.Z,{value:"select",children:"Select"}),(0,r.jsx)(J.Z,{value:"add",children:"Add"}),(0,r.jsx)(J.Z,{value:"delete",children:"Delete"})]})}),"select"===Q&&(0,r.jsx)(W.ZP,{children:(0,r.jsx)(M.Z,{select:!0,label:"Location",value:d,onChange:function(e){I.getPaths({value:e.target.value}).then((function(n){f(n.images),oe(50),p(e.target.value)}))},helperText:"Which folder to take images from",fullWidth:!0,children:v.map((function(e,n){return"INDEX"===e.type&&(0,r.jsx)(V.Z,{value:e.value,children:e.label},n)}))})}),"add"===Q&&(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(W.ZP,{children:(0,r.jsx)(M.Z,{select:!0,label:"Type",value:Pe,onChange:function(e){ke(e.target.value)},fullWidth:!0,children:ie.map((function(e,n){return(0,r.jsx)(V.Z,{value:e.value,children:e.label},n)}))})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(M.Z,{label:"Name",value:Ce,onChange:function(e){ee(e,Ne)},helperText:"Name of folder",fullWidth:!0})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(M.Z,{label:"Path",value:Te,onChange:function(e){ee(e,Ee)},helperText:"Absolute path of folder in the style C:\\folder",fullWidth:!0})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(L.Z,{onClick:function(e){return function(e){e.preventDefault();var n={type:Pe,label:Ce,value:Te};I.addFolder(n).then((function(e){De(),ke(""),Ne(""),Ee("")}))}(e)},children:(0,r.jsx)(u.kc,{children:"Add"})})})]}),"delete"===Q&&(0,r.jsx)(W.ZP,{children:(0,r.jsx)(M.Z,{select:!0,label:"Location",value:"",onChange:function(e){!function(e){I.deleteFolder(v.find((function(n){return n.value===e.target.value}))).then((function(e){De()}))}(e)},helperText:"Select folder to delete",fullWidth:!0,children:v.map((function(e,n){return(0,r.jsx)(V.Z,{value:e.value,children:e.label},n)}))})}),(0,r.jsx)(T.Z,{}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(z.Z,{children:(0,r.jsx)(F.Z,{children:"Tags"})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsxs)(B.Z,{color:"primary",value:N,exclusive:!0,onChange:function(e){return ee(e,E)},fullWidth:!0,children:[(0,r.jsx)(J.Z,{value:"filter",children:"Filter"}),(0,r.jsx)(J.Z,{value:"add",children:"Add"}),(0,r.jsx)(J.Z,{value:"delete",children:"Delete"})]})}),"filter"===N&&(0,r.jsx)(W.ZP,{children:(0,r.jsx)(X.Z,{multiple:!0,value:w,onChange:function(e){ee(e,b),Ae(e.target.value,i)},label:"Tags",input:(0,r.jsx)(U.Z,{}),renderValue:function(e){return e.map((function(e){return ne(e)})).join(", ")},fullWidth:!0,children:g.map((function(e,n,t){return(0,r.jsxs)(V.Z,{value:e,children:[(0,r.jsx)(R.Z,{checked:w.indexOf(e)>-1}),(0,r.jsx)(z.Z,{primary:ne(e)})]},n)}))})}),"add"===N&&(0,r.jsxs)(W.ZP,{children:[(0,r.jsx)(M.Z,{label:"Add tag",value:k,onChange:function(e){ee(e,S)}}),(0,r.jsx)(L.Z,{onClick:function(e){return function(e){e.preventDefault(),I.addTag(k).then((function(e){De(),S("")}))}(e)},alignItems:"center",children:(0,r.jsx)(u.kc,{children:"Add"})})]}),"delete"===N&&(0,r.jsx)(W.ZP,{children:(0,r.jsx)(X.Z,{multiple:!0,value:w,label:"Tags",input:(0,r.jsx)(U.Z,{}),renderValue:function(e){return e.map((function(e){return ne(e)})).join(", ")},fullWidth:!0,children:g.map((function(e,n){return(0,r.jsxs)(V.Z,{value:e,onClick:function(n){return function(e,n){e.preventDefault(),I.deleteTag(n).then((function(e){De()}))}(n,e)},children:[(0,r.jsx)(z.Z,{primary:ne(e)}),(0,r.jsx)(te.Z,{})]},n)}))})}),(0,r.jsx)(T.Z,{}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(z.Z,{children:(0,r.jsx)(F.Z,{children:"Moving Utils"})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(L.Z,{onClick:function(e){return function(e){e.preventDefault(),xe.length===i.length?ve([]):ve(o)}(e)},children:(0,r.jsxs)(O.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(F.Z,{children:"Select All"})}),(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(R.Z,{checked:xe.length===o.length&&xe.length>0})})]})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(X.Z,{fullWidth:!0,value:"",onChange:function(e){!function(e){var n=xe.map((function(n){return{from:n.folder,to:e.target.value.value,fileName:n.fileName}}));I.moveImage(n).then((function(e){De(),ve([])}))}(e)},renderValue:function(e){return(0,r.jsx)(ue.Z,{})},displayEmpty:!0,defaultValue:"",children:v.map((function(e,n){return"INDEX"===e.type&&(0,r.jsx)(V.Z,{value:e,children:(0,r.jsx)(z.Z,{primary:e.label})},n)}))})}),(0,r.jsx)(T.Z,{}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(z.Z,{children:(0,r.jsx)(F.Z,{children:"Settings"})})}),(0,r.jsx)(W.ZP,{children:(0,r.jsx)(L.Z,{onClick:function(e){return function(e){e.preventDefault(),I.index().then((function(e){return De()}))}(e)},children:(0,r.jsx)(u.kc,{children:"Re-Index"})})})]}),(0,r.jsx)(G,{children:(0,r.jsx)(H.Z,{cols:6,gap:0,id:"imageList",children:o.slice(0,le).map((function(e,n){return function(e){return e.height&&e.width&&e.fileName&&e.folder}(e)&&(0,r.jsxs)($.Z,{item:"true",children:[(0,r.jsx)(K(),{id:e.fileName,src:"".concat("http://localhost:8080","/image?url=").concat(e.folder.replaceAll("\\","/"),"/").concat(e.fileName),alt:"",layout:"intrinsic",width:e.width,height:e.height,loading:"lazy",onClick:function(n){ge(e),we(!0)}}),(0,r.jsx)(q.Z,{position:"below",title:(0,r.jsxs)(O.ZP,{container:!0,children:[(0,r.jsx)(O.ZP,{item:!0,xs:10,children:(0,r.jsx)(X.Z,{fullWidth:!0,multiple:!0,value:e.tags,onChange:function(n){We(n,e)},renderValue:function(e){return(0,r.jsxs)(O.ZP,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[(0,r.jsx)(O.ZP,{item:!0,children:(0,r.jsx)(re.Z,{})}),(0,r.jsx)(O.ZP,{children:(0,r.jsxs)(F.Z,{children:[" ",e.length>0?"Tagged":"-"]})})]})},displayEmpty:!0,children:g.sort().map((function(n,t,u){return(0,r.jsxs)(V.Z,{value:n,children:[(0,r.jsx)(R.Z,{checked:e.tags.indexOf(n)>-1}),(0,r.jsx)(z.Z,{primary:ne(n)})]},t)}))})}),(0,r.jsx)(O.ZP,{item:!0,xs:2,children:(0,r.jsx)(R.Z,{checked:xe.indexOf(e)>-1,onClick:function(n){xe.includes(e)?ve(xe.filter((function(n){return n!==e}))):ve(ce(xe).concat([e]))}})})]})})]},n)}))})})]})},le=function(){return(0,r.jsx)(u.Jo,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:(0,r.jsx)(se,{})})}}},function(e){e.O(0,[131,774,888,179],(function(){return n=5557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);